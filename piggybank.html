<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Ø§Ù„Ø­ØµØ§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© - ØªÙˆÙÙŠØ± Ø¯ÙŠÙ†Ø§Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ</title>
    <style>
        /* Reset and Base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
        }
        
        :root {
            --primary-color: #006633; /* Ø£Ø®Ø¶Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ */
            --secondary-color: #d21034; /* Ø£Ø­Ù…Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ */
            --accent-color: #ffcc00;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --shadow: 0 4px 12px rgba(0,0,0,0.1);
            --radius: 16px;
            --radius-sm: 10px;
        }
        
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            min-height: 100vh;
            padding: 15px;
            direction: rtl;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Container */
        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            min-height: calc(100vh - 30px);
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #008844 100%);
            color: white;
            padding: clamp(20px, 4vw, 30px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.1;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        
        .piggy-bank {
            font-size: clamp(3rem, 10vw, 4rem);
            margin: 10px 0;
            display: block;
        }
        
        h1 {
            font-size: clamp(1.8rem, 5vw, 2.2rem);
            margin-bottom: 10px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: clamp(1rem, 3vw, 1.1rem);
            opacity: 0.95;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .date-display {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 10px 20px;
            display: inline-block;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            margin-top: 10px;
            position: relative;
            z-index: 1;
        }
        
        /* Main Content */
        .main-content {
            padding: clamp(15px, 3vw, 25px);
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        /* Today Section */
        .today-section {
            background: linear-gradient(135deg, #f8fff9 0%, #e8f5e9 100%);
            border-radius: var(--radius);
            padding: clamp(15px, 3vw, 20px);
            margin-bottom: clamp(15px, 3vw, 25px);
            border: 2px solid #e0f2e1;
            border-right: 6px solid var(--primary-color);
        }
        
        h2 {
            color: var(--primary-color);
            font-size: clamp(1.3rem, 4vw, 1.5rem);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2::before {
            content: "ğŸ’°";
            font-size: 1.5em;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .input-row {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        @media (min-width: 768px) {
            .input-row {
                flex-direction: row;
            }
            
            .input-row > * {
                flex: 1;
            }
        }
        
        input, textarea {
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
            font-family: inherit;
        }
        
        input:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 51, 0.1);
        }
        
        .amount-input-container {
            position: relative;
        }
        
        .currency-symbol {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .amount-input-container input {
            padding-left: 50px;
            text-align: right;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        textarea {
            resize: vertical;
            min-height: 80px;
            max-height: 150px;
        }
        
        button {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            touch-action: manipulation;
        }
        
        button:hover, button:active {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 102, 51, 0.3);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .save-btn {
            background: linear-gradient(to right, var(--primary-color), #008844);
            font-size: 1.2rem;
            padding: 18px;
            margin-top: 10px;
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: clamp(15px, 3vw, 25px) 0;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--radius-sm);
            padding: 20px 15px;
            text-align: center;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-title {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: clamp(1.8rem, 4vw, 2.2rem);
            font-weight: 800;
            color: var(--primary-color);
            margin: 5px 0;
        }
        
        .stat-unit {
            font-size: 0.9rem;
            color: var(--secondary-color);
            font-weight: 600;
        }
        
        /* History Section */
        .history-section {
            margin-top: auto;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow);
            flex: 1;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }
        
        th {
            background: linear-gradient(to right, var(--primary-color), #008844);
            color: white;
            padding: 18px 15px;
            text-align: center;
            font-weight: 600;
            white-space: nowrap;
            position: sticky;
            top: 0;
        }
        
        td {
            padding: 16px 15px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:hover {
            background-color: #f0f7f0;
        }
        
        .amount-cell {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.1rem;
        }
        
        .cumulative-cell {
            font-weight: 700;
            color: var(--secondary-color);
        }
        
        .note-cell {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .delete-btn {
            background: var(--danger-color);
            padding: 10px 20px;
            font-size: 0.9rem;
            width: auto;
            min-width: 80px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 12px 20px;
            font-size: 1rem;
            border-radius: 50px;
            width: auto;
            flex: 1;
            min-width: 140px;
            max-width: 200px;
        }
        
        .export-btn {
            background: linear-gradient(to right, #4CAF50, #2E7D32);
        }
        
        .clear-btn {
            background: linear-gradient(to right, #ff9800, #f57c00);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }
        
        .empty-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            background-color: #f8f9fa;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            left: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: var(--radius-sm);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .container {
                border-radius: 12px;
            }
            
            header {
                padding: 20px 15px;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
            
            th, td {
                padding: 12px 10px;
                font-size: 0.9rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-btn {
                max-width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                min-height: calc(100vh - 20px);
            }
            
            .date-display {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .amount-input-container input {
                font-size: 1.1rem;
                padding-left: 45px;
            }
            
            .currency-symbol {
                left: 15px;
                font-size: 1rem;
            }
        }
        
        /* Landscape Mode */
        @media (max-height: 600px) and (orientation: landscape) {
            .container {
                max-height: 100vh;
                overflow-y: auto;
            }
            
            header {
                padding: 15px;
            }
            
            .piggy-bank {
                font-size: 2.5rem;
                margin: 5px 0;
            }
            
            .today-section {
                margin-bottom: 15px;
            }
        }
        
        /* Dark Mode Support */
        @media (prefers-color-scheme: dark) {
            :root {
                --light-color: #1a1a1a;
                --dark-color: #ffffff;
            }
            
            body {
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
            }
            
            .container {
                background-color: #2d3748;
                color: white;
            }
            
            input, textarea {
                background-color: #4a5568;
                color: white;
                border-color: #718096;
            }
            
            .today-section {
                background: #2d3748;
                border-color: #4a5568;
            }
            
            .stat-card {
                background-color: #4a5568;
                color: white;
            }
            
            tr:nth-child(even) {
                background-color: #4a5568;
            }
            
            tr:hover {
                background-color: #5a6578;
            }
            
            footer {
                background-color: #1a202c;
                color: #a0aec0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-bg"></div>
            <div class="piggy-bank">ğŸ’°</div>
            <h1>Ø§Ù„Ø­ØµØ§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©</h1>
            <p class="subtitle">Ø§Ø¯Ø®Ø± Ø¯ÙŠÙ†Ø§Ø±Ø§ØªÙƒ ÙƒÙ„ ÙŠÙˆÙ… ÙˆØ´Ø§Ù‡Ø¯ Ù…Ø¯Ø®Ø±Ø§ØªÙƒ ØªÙ†Ù…Ùˆ!</p>
            <div class="date-display" id="current-date"></div>
        </header>
        
        <div class="main-content">
            <section class="today-section">
                <h2>ØªØ³Ø¬ÙŠÙ„ ØªÙˆÙÙŠØ± Ø§Ù„ÙŠÙˆÙ…</h2>
                <div class="input-group">
                    <div class="input-row">
                        <div class="amount-input-container">
                            <span class="currency-symbol">Ø¯.Ø¬</span>
                            <input type="number" 
                                   id="amount-input" 
                                   placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯Ø®Ø± Ø§Ù„ÙŠÙˆÙ…" 
                                   min="0" 
                                   step="10"
                                   inputmode="decimal"
                                   required>
                        </div>
                        <input type="text" 
                               id="note-input" 
                               placeholder="Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" 
                               maxlength="100">
                    </div>
                    <textarea id="detail-input" 
                              placeholder="ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" 
                              maxlength="500"></textarea>
                    <button id="save-btn" class="save-btn">
                        ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ
                    </button>
                </div>
            </section>
            
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-title">Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©</div>
                    <div class="stat-value" id="total-savings">0</div>
                    <div class="stat-unit">Ø¯ÙŠÙ†Ø§Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
                    <div class="stat-value" id="daily-average">0</div>
                    <div class="stat-unit">Ø¯ÙŠÙ†Ø§Ø±/ÙŠÙˆÙ…</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">Ø£ÙŠØ§Ù… Ø§Ù„ØªÙˆÙÙŠØ±</div>
                    <div class="stat-value" id="days-count">0</div>
                    <div class="stat-unit">ÙŠÙˆÙ…</div>
                </div>
            </div>
            
            <section class="history-section">
                <div class="history-header">
                    <h2>ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ø®Ø±Ø§Øª</h2>
                    <div class="total-display">
                        <strong id="current-total">0 Ø¯.Ø¬</strong>
                    </div>
                </div>
                
                <div class="table-container">
                    <table id="savings-table">
                        <thead>
                            <tr>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</th>
                                <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</th>
                                <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                        </tbody>
                    </table>
                    <div id="empty-state" class="empty-state" style="display: none;">
                        <div class="empty-icon">ğŸ’°</div>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¯Ø®Ø±Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø¨Ø¹Ø¯</h3>
                        <p>Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„ØªÙˆÙÙŠØ± Ø§Ù„ÙŠÙˆÙ… Ù„ØªØ¸Ù‡Ø± Ù…Ø¯Ø®Ø±Ø§ØªÙƒ Ù‡Ù†Ø§!</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="export-btn" class="action-btn export-btn">
                        ğŸ“¥ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button id="clear-all-btn" class="action-btn clear-btn">
                        ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
                    </button>
                </div>
            </section>
        </div>
        
        <footer>
            <p>Ø§Ù„Ø­ØµØ§Ù„Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</p>
            <p>Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ (Ø¯.Ø¬) | ğŸ‡©ğŸ‡¿</p>
        </footer>
    </div>

    <div id="toast" class="toast"></div>

    <script>
        // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­ØµØ§Ù„Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let savingsData = [];
        
        // DOM Elements
        const elements = {
            amountInput: document.getElementById('amount-input'),
            noteInput: document.getElementById('note-input'),
            detailInput: document.getElementById('detail-input'),
            saveBtn: document.getElementById('save-btn'),
            exportBtn: document.getElementById('export-btn'),
            clearAllBtn: document.getElementById('clear-all-btn'),
            tableBody: document.getElementById('table-body'),
            totalSavings: document.getElementById('total-savings'),
            dailyAverage: document.getElementById('daily-average'),
            daysCount: document.getElementById('days-count'),
            currentDate: document.getElementById('current-date'),
            currentTotal: document.getElementById('current-total'),
            emptyState: document.getElementById('empty-state'),
            toast: document.getElementById('toast')
        };
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ
        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            const dateString = now.toLocaleDateString('ar-DZ', options);
            elements.currentDate.textContent = dateString;
        }
        
        // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ar-DZ', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount) + ' Ø¯.Ø¬';
        }
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
        function showToast(message, type = 'success') {
            elements.toast.textContent = message;
            elements.toast.style.background = type === 'error' ? 'var(--danger-color)' : 'var(--primary-color)';
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function loadData() {
            try {
                const saved = localStorage.getItem('algerianPiggyBank');
                if (saved) {
                    savingsData = JSON.parse(saved);
                }
            } catch (error) {
                console.error('Error loading data:', error);
                showToast('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function saveData() {
            try {
                localStorage.setItem('algerianPiggyBank', JSON.stringify(savingsData));
            } catch (error) {
                console.error('Error saving data:', error);
                showToast('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
            }
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const total = savingsData.reduce((sum, item) => sum + item.amount, 0);
            const days = savingsData.length;
            const average = days > 0 ? total / days : 0;
            
            elements.totalSavings.textContent = formatCurrency(total);
            elements.dailyAverage.textContent = formatCurrency(average);
            elements.daysCount.textContent = days;
            elements.currentTotal.textContent = formatCurrency(total);
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ØªØµÙØ­
            document.title = `Ø­ØµØ§Ù„Ø© (${formatCurrency(total)}) - ØªÙˆÙÙŠØ± Ø¯ÙŠÙ†Ø§Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ`;
        }
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function updateTable() {
            if (savingsData.length === 0) {
                elements.tableBody.innerHTML = '';
                elements.emptyState.style.display = 'block';
                return;
            }
            
            elements.emptyState.style.display = 'none';
            
            let cumulative = 0;
            let rowsHTML = '';
            
            // ÙØ±Ø² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù‚Ø¯Ù…
            const sortedData = [...savingsData].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedData.forEach((item, index) => {
                cumulative += item.amount;
                
                rowsHTML += `
                    <tr>
                        <td>${item.date}</td>
                        <td class="amount-cell">${formatCurrency(item.amount)}</td>
                        <td class="cumulative-cell">${formatCurrency(cumulative)}</td>
                        <td class="note-cell" title="${item.note || ''}">
                            ${item.note ? (item.note.length > 20 ? item.note.substring(0, 20) + '...' : item.note) : '-'}
                        </td>
                        <td>
                            <button onclick="deleteEntry(${index})" class="delete-btn">
                                Ø­Ø°Ù
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            elements.tableBody.innerHTML = rowsHTML;
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¯Ø®Ø±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
        function addSavings() {
            const amount = parseFloat(elements.amountInput.value);
            const note = elements.noteInput.value.trim();
            const details = elements.detailInput.value.trim();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            if (!amount || amount <= 0 || amount > 1000000) {
                showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ Ø¨ÙŠÙ† 0.01 Ùˆ 1,000,000 Ø¯.Ø¬', 'error');
                elements.amountInput.focus();
                return;
            }
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ù„ÙŠ
            const now = new Date();
            const dateStr = now.toLocaleDateString('ar-DZ');
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            savingsData.push({
                date: dateStr,
                amount: amount,
                note: note,
                details: details,
                timestamp: now.getTime()
            });
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            saveData();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            updateStats();
            updateTable();
            
            // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
            elements.amountInput.value = '';
            elements.noteInput.value = '';
            elements.detailInput.value = '';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
            showToast(`ØªÙ… Ø­ÙØ¸ ${formatCurrency(amount)} ÙÙŠ Ø­ØµØ§Ù„ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!`);
            
            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ù…Ø¨Ù„Øº
            elements.amountInput.focus();
        }
        
        // Ø­Ø°Ù Ù…Ø¯Ø®Ù„
        function deleteEntry(index) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¯Ø®Ù„ØŸ')) {
                // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø§Ù„ÙÙ‡Ø±Ø³ ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶ Ø¥Ù„Ù‰ Ø§Ù„ÙÙ‡Ø±Ø³ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                const sortedData = [...savingsData].sort((a, b) => new Date(b.date) - new Date(a.date));
                const itemToDelete = sortedData[index];
                const actualIndex = savingsData.findIndex(item => item.timestamp === itemToDelete.timestamp);
                
                if (actualIndex !== -1) {
                    savingsData.splice(actualIndex, 1);
                    saveData();
                    updateStats();
                    updateTable();
                    showToast('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¯Ø®Ù„ Ø¨Ù†Ø¬Ø§Ø­');
                }
            }
        }
        
        // ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function exportData() {
            if (savingsData.length === 0) {
                showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'error');
                return;
            }
            
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø§Ù„Ù…Ø¨Ù„Øº (Ø¯.Ø¬),Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª,Ø§Ù„ØªÙØ§ØµÙŠÙ„,Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ\n";
            
            savingsData.forEach(item => {
                const row = [
                    `"${item.date}"`,
                    item.amount,
                    `"${item.note || ''}"`,
                    `"${item.details || ''}"`,
                    item.timestamp
                ].join(',');
                csvContent += row + "\n";
            });
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `Ù…Ø¯Ø®Ø±Ø§Øª_Ø­ØµØ§Ù„Ø©_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showToast('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
        }
        
        // Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (savingsData.length === 0) {
                showToast('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ù…Ø³Ø­', 'error');
                return;
            }
            
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) {
                savingsData = [];
                saveData();
                updateStats();
                updateTable();
                showToast('ØªÙ… Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
            }
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function initApp() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            loadData();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ®
            updateCurrentDate();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„
            updateStats();
            updateTable();
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            elements.saveBtn.addEventListener('click', addSavings);
            elements.exportBtn.addEventListener('click', exportData);
            elements.clearAllBtn.addEventListener('click', clearAllData);
            
            // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
            elements.amountInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    addSavings();
                }
            });
            
            elements.noteInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    elements.detailInput.focus();
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©
            setInterval(updateCurrentDate, 60000);
            
            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ù…Ø¨Ù„Øº
            setTimeout(() => {
                elements.amountInput.focus();
            }, 500);
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ù„Ù„Ø²Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± (Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©)
            elements.saveBtn.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.98)';
            });
            
            elements.saveBtn.addEventListener('touchend', function() {
                this.style.transform = '';
            });
            
            // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù†Ù…Ø§Ø°Ø¬
            document.querySelectorAll('input').forEach(input => {
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && input.type !== 'button') {
                        e.preventDefault();
                    }
                });
            });
        }
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', initApp);
        
        // Ø¬Ø¹Ù„ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
        window.deleteEntry = deleteEntry;
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ØµÙØ­Ø© Ù‚Ø¯ ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„
            setTimeout(() => {
                elements.amountInput.focus();
            }, 300);
        });
    </script>
</body>
</html>